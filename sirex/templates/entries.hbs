{{#each imports}}
import { default as Component_{{{@index}}}, register as register_{{{@index}}} } from {{{json path}}};
{{/each}}
import { registerHelper } from './helper.js';

window.SIREX = window.SIREX || {};

if(!window.SIREX[{{{json packageName }}}]) {
    const entries = {
    {{#each imports}}
        {{{json name}}}: { component: Component_{{{@index}}}, register: register_{{{@index}}} },
    {{/each}}
    };
    window.SIREX[{{{json packageName}}}] = {
        register: function(name) {
            registerHelper({
                name:{{{json packageName}}},
                version:{{{json version}}}
            }, entries, name)
        },
        entries
    };

    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = `resources/${ {{{json packageName}}} }/bundle.css`;
    document.head.appendChild(link);
} else {
    console.warn(`SIREX: Package{{{json packageName}}}already exists.`)
}

export default window.SIREX[{{{json packageName}}}];
